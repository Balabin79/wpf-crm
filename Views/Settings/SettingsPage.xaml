<Page x:Class="Dental.Views.Settings.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      xmlns:tree="clr-namespace:Dental.Infrastructures.TreeList" 
      xmlns:vm ="clr-namespace:Dental.ViewModels" 
      xmlns:converter="clr-namespace:Dental.Infrastructures.Converters" 
      xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
      xmlns:commands ="clr-namespace:Dental.Infrastructures.Commands" 
      xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" 
      xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
      xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
      xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" 
      xmlns:svgc="http://sharpvectors.codeplex.com/svgc/" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="B6 Sheduler">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary>
                    <commands:PrintCommand x:Key="Print"/>
                    <vm:SettingsViewModel x:Key="vm"/>
                    <converter:BoolIntConverter x:Key="boolConverter" />
                    <converter:DateToStringConverter x:Key="DateToString"/>
                    <converter:DoubleToStringConverter x:Key="DoubleToString"/>


                </ResourceDictionary>
                <ResourceDictionary Source="/Views/PrintFields.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>
    <Border BorderBrush="LightGray" BorderThickness="1" Margin="5" dx:ThemeManager.ThemeName="Office2019White" DataContext="{StaticResource vm}" x:Name="Border">

        <Grid x:Name="gridMainClientGroups"  ScrollViewer.CanContentScroll="True" ScrollViewer.VerticalScrollBarVisibility="Auto" >
            <Grid.RowDefinitions>
                <RowDefinition Height="24"/>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <DockPanel LastChildFill="True">
                <StackPanel DockPanel.Dock="Left" HorizontalAlignment="Left" Orientation="Horizontal">
                    <dx:DXImage Source="{dx:DXImage SvgImages/XAF/ModelEditor_Settings.svg}"  Height="20" Width="20" Margin="5 0 0 0"/>
                    <TextBlock Text="Настройки" FontSize="14" Padding="2 2 5 0" />
                </StackPanel>

                <dxb:BarContainerControl DockPanel.Dock="Top" HorizontalAlignment="Right">

                    <dxb:ToolBarControl Background="Transparent"
                                        ShowDragWidget="False" Caption="File" 
                                        AllowCustomizationMenu="False" AllowQuickCustomization="False" BarItemDisplayMode="ContentAndGlyph">

                        <dxb:BarButtonItem Content="Расположение данных" 
                                           Glyph="{dx:DXImage SvgImages/Dashboards/EditDataSource.svg}"
                                           GlyphSize="Small"
                                           Command="{Binding OpenPathsSettingsFormCommand}"/>

                        <dxb:BarButtonItem Content="Лицензия" 
                                           Glyph="{dx:DXImage SvgImages/XAF/ModelEditor_KeyProperty.svg}"
                                           GlyphSize="Small"
                                           Command="{Binding OpenLicenseFormCommand}"/>
                        <dxb:BarItemLinkSeparator/>
                        <dxb:BarButtonItem Content="О программе"  
                                           Glyph="{dx:DXImage SvgImages/Outlook Inspired/About.svg}"
                                           GlyphSize="Small"
                                           Command="{Binding OpenAboutFormCommand}"/>
                        <dxb:BarItemLinkSeparator/>
                        
                        <dxb:BarButtonItem IsVisible="{DXBinding Expr='!IsReadOnly', Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                           Content="Закрыть для редактирования" 
                                           Glyph="{dx:DXImage SvgImages/XAF/State_ItemVisibility_Show.svg}" 
                                           GlyphSize="Small"
                                           Command="{Binding EditableCommand}"/>

                        <dxb:BarButtonItem IsVisible="{DXBinding Expr='IsReadOnly', Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                           Content="Редактировать данные" 
                                           Glyph="{dx:DXImage SvgImages/XAF/State_ItemVisibility_Hide.svg}" 
                                           GlyphSize="Small"
                                           Command="{Binding EditableCommand}"/>

                        <dxb:BarButtonItem Content="Сохранить"                                         
                                           GlyphSize="Small"
                                           IsEnabled="{DXBinding Expr='!IsReadOnly and !string.IsNullOrEmpty(Settings.GoogleAccount)', Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                           Command="{Binding SaveCommand}"
                                           Glyph="{dx:DXImage SvgImages/Outlook Inspired/Save.svg}" />

                    </dxb:ToolBarControl>
                </dxb:BarContainerControl>
            </DockPanel>

            <ScrollViewer VerticalScrollBarVisibility="Auto" VerticalAlignment="Stretch" Grid.Row="1">

                <dx:DXTabControl Margin="3 10 3 3">
                    <dx:DXTabItem Header="Настройки" >
                        <dxlc:LayoutGroup View="Group" Orientation="Vertical">

                            <dxlc:LayoutGroup View="GroupBox" Orientation="Vertical" ItemLabelsAlignment="Local" Margin="0 0 0 5" Height="170" >
                                <dxlc:LayoutGroup.HeaderTemplate>
                                    <DataTemplate >
                                        <TextBlock Text="Обшие настройки" VerticalAlignment="Center" Height="22"/>
                                    </DataTemplate>
                                </dxlc:LayoutGroup.HeaderTemplate>
              
                                    <GroupBox Header="Вход в программу" Grid.Column="0" Margin="0 0 3 0">
                                    <StackPanel>
                                <dxlc:LayoutItem Label="Включить ролевой доступ:" LabelPosition="Top" >
                                    <dxe:CheckEdit Name="roleEnabled"
                                                   Checked="CheckEdit_Checked"
                                                   Unchecked="CheckEdit_Unchecked"
                                                   EditValue="{Binding Settings.RolesEnabled, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                   UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                   IsReadOnly="{Binding IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                </dxlc:LayoutItem>
                                
                                <dxlc:LayoutItem                                   
                                    Label="Использовать вход с паролем:" LabelPosition="Top" >
                                    <dxe:CheckEdit 
                                        Name="passEnabled"
                                        Checked="CheckEditPass_Checked"
                                        Unchecked="CheckEditPass_Unchecked"
                                        IsEnabled="{DXBinding Expr='@e(roleEnabled).EditValue == true' }"
                                        EditValue="{Binding Settings.IsPasswordRequired, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                        UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                        IsReadOnly="{Binding IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                        </dxlc:LayoutItem>
                                    </StackPanel>
                                </GroupBox>
    
                                
                            </dxlc:LayoutGroup>

                            <dxlc:LayoutGroup View="GroupBox" Orientation="Vertical" ItemLabelsAlignment="Local" Margin="0 0 0 5" >
                                <dxlc:LayoutGroup.HeaderTemplate>
                                    <DataTemplate >
                                        <TextBlock Text="Настройки доступа к API &quot;B6 Dental&quot;" VerticalAlignment="Center" Height="22"/>
                                    </DataTemplate>
                                </dxlc:LayoutGroup.HeaderTemplate>
                                <dxlc:LayoutItem Label="URL (Сетевой адрес API):" LabelPosition="Top">
                                    <dxe:TextEdit Text="{Binding Settings.UrlApi, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                                  IsReadOnly="{Binding IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Логин:" LabelPosition="Top">
                                    <dxe:TextEdit Text="{Binding Settings.LoginApi, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                                  IsReadOnly="{Binding IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Пароль:" LabelPosition="Top" >
                                    <dxe:TextEdit Text="{Binding Settings.PasswordApi, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                                  IsReadOnly="{Binding IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>

                            <dxlc:LayoutGroup View="GroupBox" Orientation="Vertical" ItemLabelsAlignment="Local" >
                                <dxlc:LayoutGroup.HeaderTemplate>
                                    <DataTemplate >
                                        <TextBlock Text="Настройки сервиса &quot;Продокторов&quot;" VerticalAlignment="Center" Height="22"/>
                                    </DataTemplate>
                                </dxlc:LayoutGroup.HeaderTemplate>
                                <dxlc:LayoutItem Label="Логин:" LabelPosition="Top">
                                    <dxe:TextEdit Text="{Binding Settings.LoginProdoctorov, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                                  IsReadOnly="{Binding IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Пароль:" LabelPosition="Top" >
                                    <dxe:TextEdit Text="{Binding Settings.PasswordProdoctorov, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                                  IsReadOnly="{Binding IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                        </dxlc:LayoutGroup>
                    </dx:DXTabItem>

                    <dx:DXTabItem Header="Ролевой доступ" >
                        <ScrollViewer VerticalScrollBarVisibility="Auto" VerticalAlignment="Stretch" Grid.Row="1">
                            <dxg:GridControl  AutoGenerateColumns="None" 
                                              MaxHeight="2000" 
                                              Name="gridAd"  
                                              ItemsSource="{Binding Employees, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                                              Margin="2">

                                <dxg:GridControl.View>
                                    <dxg:TableView                   
                                        ShowTotalSummary="False" 
                                        UseLegacyFilterPanel="True"
                                        ShowSearchPanelMode="Always"
                                        SearchPanelAllowFilter="True"
                                        AutoWidth="True" 
                                        PrintAutoWidth="True"
                                        BestFitModeOnSourceChange="VisibleRows"            
                                        NavigationStyle="Cell"
                                        AllowScrollToFocusedRow="True" 
                                        VerticalScrollbarVisibility="Auto"
                                        AllowPrintColumnHeaderImage="True"
                                        ShowGroupPanel="False">
                                    </dxg:TableView>
                                </dxg:GridControl.View>

                                <dxg:GridColumn FieldName="Employee" Header="Сотрудник"  MinWidth="200" Width="5*">
                                    <dxg:GridColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <svgc:SvgViewbox Source="/Resources/Icons/svg/list.svg" Height="9"/>
                                                <TextBlock Text="ФИО" Margin="3 0 0 0"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </dxg:GridColumn.HeaderTemplate>
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=RowData.Row.Fio, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" Margin="3 0 0 0" />
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                </dxg:GridColumn>

                                <dxg:GridColumn FieldName="IsDoctor" Header="&quot;Врач&quot;"  Width="1*" HorizontalHeaderContentAlignment="Center">
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit HorizontalAlignment="Center"         
                                                           EditValue="{Binding RowData.Row.IsDoctor, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                           UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                           IsReadOnly="{Binding ElementName=gridAd, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                    <dxg:GridColumn.CellEditTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit HorizontalAlignment="Center"         
                                                           EditValue="{Binding RowData.Row.IsDoctor, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                           UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                           IsReadOnly="{Binding ElementName=gridAd, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </dxg:GridColumn.CellEditTemplate>
                                </dxg:GridColumn>

                                <dxg:GridColumn FieldName="IsReception" Header="&quot;Ресепшен&quot;"  Width="1*" HorizontalHeaderContentAlignment="Center">
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit HorizontalAlignment="Center"          
                                                           EditValue="{Binding RowData.Row.IsReception, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                           UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                           IsReadOnly="{Binding ElementName=gridAd, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                    <dxg:GridColumn.CellEditTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit HorizontalAlignment="Center"          
                                                           EditValue="{Binding RowData.Row.IsReception, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                           UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                           IsReadOnly="{Binding ElementName=gridAd, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </dxg:GridColumn.CellEditTemplate>
                                </dxg:GridColumn>

                                <dxg:GridColumn FieldName="IsAdmin" Header="&quot;Администратор&quot;"  Width="1*" HorizontalHeaderContentAlignment="Center">
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit   HorizontalAlignment="Center"        
                                                             EditValue="{Binding RowData.Row.IsAdmin, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                             UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                             IsReadOnly="{Binding ElementName=gridAd, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                    <dxg:GridColumn.CellEditTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit  HorizontalAlignment="Center"        
                                                            EditValue="{Binding RowData.Row.IsAdmin, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                            UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                            IsReadOnly="{Binding ElementName=gridAd, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </dxg:GridColumn.CellEditTemplate>
                                </dxg:GridColumn>

                                <dxg:GridColumn FieldName="Password" Header="Пароль" MinWidth="100" Width="2*">
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=RowData.Row.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"  />
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                    <dxg:GridColumn.CellEditTemplate>
                                        <DataTemplate>
                                            <dxe:TextEdit 
                                                Text="{Binding Path=RowData.Row.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"                       
                                                IsReadOnly="{Binding ElementName=gridAd, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </dxg:GridColumn.CellEditTemplate>
                                </dxg:GridColumn>
                            </dxg:GridControl>
                        </ScrollViewer>
                    </dx:DXTabItem>
                                      
                    <dx:DXTabItem Header="Настройка ролей" >
                        <ScrollViewer VerticalScrollBarVisibility="Auto" VerticalAlignment="Stretch" Grid.Row="1">
                            <dxg:GridControl  AutoGenerateColumns="None" 
                                              MaxHeight="2000" 
                                              Name="gridRoleSettings"  
                                              ItemsSource="{Binding Roles, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                                              Margin="2">

                                <dxg:GridControl.View>
                                    <dxg:TreeListView                                
                                        x:Name="view"
                                        KeyFieldName="Id"
                                        ParentFieldName="ParentId"
                                        TreeDerivationMode="Selfreference" 
                                        ShowTotalSummary="False" 
                                        UseLegacyFilterPanel="True"
                                        ShowSearchPanelMode="Always"
                                        SearchPanelAllowFilter="True"
                                        AllowResizing="True"
                                        BestFitModeOnSourceChange="VisibleRows"            
                                        NavigationStyle="Cell"
                                        AllowScrollToFocusedRow="True" 
                                        VerticalScrollbarVisibility="Auto"
                                        AllowPrintColumnHeaderImage="True" 
                                        PrintNodeImages="False"
                                        PrintExpandButtons="False"
                                        PrintFixedTotalSummary="False"
                                        PrintNodeFooters="False"
                                        PrintRootIndent="False"
                                        PrintTotalSummary="False"
                                        PrintAllNodes="False"
                                        ShowNodeImages="True"
                                        NodeImageSize="15,15"
                                        ExpandNodesOnFiltering="True"
                                        FilterMode="Extended"    
                                        ImmediateUpdateRowPosition="True"
                                        ShowVerticalLines="False"
                                        >
                                        <dxg:TreeListView.NodeImageSelector>
                                            <tree:NodeImageSelectorForSettings  />
                                        </dxg:TreeListView.NodeImageSelector>
                                    </dxg:TreeListView>
                                </dxg:GridControl.View>

                                <dxg:GridColumn FieldName="PageTitle" Header="Раздел"  MinWidth="200" Width="5*">
                                    <dxg:GridColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <svgc:SvgViewbox Source="/Resources/Icons/svg/list.svg" Height="9"/>
                                                <TextBlock Text="Раздел" Margin="3 0 0 0"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </dxg:GridColumn.HeaderTemplate>
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Path=RowData.Row.PageTitle, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" Margin="3 0 0 0" />
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                </dxg:GridColumn>


                                <dxg:GridColumn FieldName="DoctorAccess" Header="&quot;Врач&quot;"  Width="1*" HorizontalHeaderContentAlignment="Center">
                                    
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit  HorizontalAlignment="Center"      
                                                            EditValue="{Binding RowData.Row.DoctorAccess, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                            UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                            IsReadOnly="{Binding ElementName=gridRoleSettings, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                            Visibility="{DXBinding Expr='RowData.Row.IsCategory == 1 ? `Collapsed` : `Visible`'}" />
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                    <dxg:GridColumn.CellEditTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit HorizontalAlignment="Center"       
                                                           EditValue="{Binding RowData.Row.DoctorAccess, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                           UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                           IsReadOnly="{Binding ElementName=gridRoleSettings, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                           Visibility="{DXBinding Expr='RowData.Row.IsCategory == 1 ? `Collapsed` : `Visible`'}"/>
                                           

                                        </DataTemplate>
                                    </dxg:GridColumn.CellEditTemplate>
                                </dxg:GridColumn>

                                <dxg:GridColumn FieldName="ReceptionAccess" Header="&quot;Ресепшен&quot;"  Width="1*" HorizontalHeaderContentAlignment="Center">

                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit  HorizontalAlignment="Center"      
                                                            EditValue="{Binding RowData.Row.ReceptionAccess, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                            UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                            IsReadOnly="{Binding ElementName=gridRoleSettings, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                            Visibility="{DXBinding Expr='RowData.Row.IsCategory == 1 ? `Collapsed` : `Visible`'}" />
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                    <dxg:GridColumn.CellEditTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit HorizontalAlignment="Center"       
                                                           EditValue="{Binding RowData.Row.ReceptionAccess, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                           UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                           IsReadOnly="{Binding ElementName=gridRoleSettings, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                           Visibility="{DXBinding Expr='RowData.Row.IsCategory == 1 ? `Collapsed` : `Visible`'}"/>


                                        </DataTemplate>
                                    </dxg:GridColumn.CellEditTemplate>
                                </dxg:GridColumn>


                                <dxg:GridColumn FieldName="AdminAccess" Header="&quot;Админ&quot;"  Width="1*"  HorizontalHeaderContentAlignment="Center">
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <dxe:CheckEdit  HorizontalAlignment="Center"      
                                                            EditValue="{Binding RowData.Row.AdminAccess, Mode=TwoWay, Converter={StaticResource boolConverter},                                             
                                                            UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                            IsReadOnly="{Binding ElementName=gridRoleSettings, Path=DataContext.IsReadOnly, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                            Visibility="{DXBinding Expr='RowData.Row.IsCategory == 1 ? `Collapsed` : `Visible`'}" />
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                </dxg:GridColumn>
                            </dxg:GridControl>
                        </ScrollViewer>
                    </dx:DXTabItem>
                </dx:DXTabControl>
            </ScrollViewer>
        </Grid>
    </Border>
</Page>
